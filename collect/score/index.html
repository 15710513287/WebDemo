<!doctype html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>HTML5扇形进度条</title>
	<link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>
	<div class="htmleaf-container">
		<div data-to-value='75' data-items-count='50' id="p1_barPie" class="barPie barPie--radio">
		  <span class="barPie__value">0</span>
		  <div class="barPie__ring">
		  	<input type="radio" name="barPieRadioGroup" id="p1_barPieItem0" value="100" hidden="hidden"/>
		    <label for="p1_barPieItem0" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem1" value="98.04" hidden="hidden"/>
		    <label for="p1_barPieItem1" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem2" value="96.08" hidden="hidden"/>
		    <label for="p1_barPieItem2" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem3" value="94.12" hidden="hidden"/>
		    <label for="p1_barPieItem3" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem4" value="92.16" hidden="hidden"/>
		    <label for="p1_barPieItem4" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem5" value="90.2" hidden="hidden"/>
		    <label for="p1_barPieItem5" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem6" value="88.24" hidden="hidden"/>
		    <label for="p1_barPieItem6" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem7" value="86.28" hidden="hidden"/>
		    <label for="p1_barPieItem7" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem8" value="84.32" hidden="hidden"/>
		    <label for="p1_barPieItem8" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem9" value="82.36" hidden="hidden"/>
		    <label for="p1_barPieItem9" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem10" value="80.4" hidden="hidden"/>
		    <label for="p1_barPieItem10" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem11" value="78.44" hidden="hidden"/>
		    <label for="p1_barPieItem11" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem12" value="76.48" hidden="hidden"/>
		    <label for="p1_barPieItem12" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem13" value="74.52" hidden="hidden"/>
		    <label for="p1_barPieItem13" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem14" value="72.56" hidden="hidden"/>
		    <label for="p1_barPieItem14" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem15" value="70.6" hidden="hidden"/>
		    <label for="p1_barPieItem15" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem16" value="68.64" hidden="hidden"/>
		    <label for="p1_barPieItem16" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem17" value="66.68" hidden="hidden"/>
		    <label for="p1_barPieItem17" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem18" value="64.72" hidden="hidden"/>
		    <label for="p1_barPieItem18" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem19" value="62.76" hidden="hidden"/>
		    <label for="p1_barPieItem19" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem20" value="60.8" hidden="hidden"/>
		    <label for="p1_barPieItem20" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem21" value="58.84" hidden="hidden"/>
		    <label for="p1_barPieItem21" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem22" value="56.88" hidden="hidden"/>
		    <label for="p1_barPieItem22" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem23" value="54.92" hidden="hidden"/>
		    <label for="p1_barPieItem23" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem24" value="52.96" hidden="hidden"/>
		    <label for="p1_barPieItem24" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem25" value="51" hidden="hidden"/>
		    <label for="p1_barPieItem25" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem26" value="49.04" hidden="hidden"/>
		    <label for="p1_barPieItem26" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem27" value="47.08" hidden="hidden"/>
		    <label for="p1_barPieItem27" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem28" value="45.12" hidden="hidden"/>
		    <label for="p1_barPieItem28" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem29" value="43.16" hidden="hidden"/>
		    <label for="p1_barPieItem29" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem30" value="41.2" hidden="hidden"/>
		    <label for="p1_barPieItem30" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem31" value="39.24" hidden="hidden"/>
		    <label for="p1_barPieItem31" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem32" value="37.28" hidden="hidden"/>
		    <label for="p1_barPieItem32" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem33" value="35.32" hidden="hidden"/>
		    <label for="p1_barPieItem33" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem34" value="33.36" hidden="hidden"/>
		    <label for="p1_barPieItem34" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem35" value="31.4" hidden="hidden"/>
		    <label for="p1_barPieItem35" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem36" value="29.43" hidden="hidden"/>
		    <label for="p1_barPieItem36" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem37" value="27.48" hidden="hidden"/>
		    <label for="p1_barPieItem37" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem38" value="25.51" hidden="hidden"/>
		    <label for="p1_barPieItem38" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem39" value="23.56" hidden="hidden"/>
		    <label for="p1_barPieItem39" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem40" value="21.59" hidden="hidden"/>
		    <label for="p1_barPieItem40" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem41" value="19.64" hidden="hidden"/>
		    <label for="p1_barPieItem41" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem42" value="17.68" hidden="hidden"/>
		    <label for="p1_barPieItem42" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem43" value="15.71" hidden="hidden"/>
		    <label for="p1_barPieItem43" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem44" value="13.76" hidden="hidden"/>
		    <label for="p1_barPieItem44" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem45" value="11.79" hidden="hidden"/>
		    <label for="p1_barPieItem45" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem46" value="9.84" hidden="hidden"/>
		    <label for="p1_barPieItem46" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem47" value="7.87" hidden="hidden"/>
		    <label for="p1_barPieItem47" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem48" value="5.92" hidden="hidden"/>
		    <label for="p1_barPieItem48" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem49" value="3.96" hidden="hidden"/>
		    <label for="p1_barPieItem49" class="barPie__ring__item"></label>
		    <input type="radio" name="barPieRadioGroup" id="p1_barPieItem50" value="2" hidden="hidden"/>
		    <label for="p1_barPieItem50" class="barPie__ring__item"></label>
		  </div>
		</div>
	</div
	<script src='js/stopExecutionOnTimeout.js?t=1'></script>
	<script src='js/do-in.js'></script>
	<script>
	var barPie = {
	    update: function (scopeElm, value, speed, extraStep) {
	        if (!scopeElm)
	            return;
	        var valueElm = scopeElm.querySelector('.barPie__value'), inital = +valueElm.innerHTML, delta = value - inital, doin;
	        function step(t, elapsed) {
	            t = 1 - Math.exp(-t * 7);
	            var value = delta * t + inital, remainder = value % 1;
	            if (t > 0.99 && (remainder > 0.9 || remainder < 0.01)) {
	                value = Math.round(value);
	                doin.step = function () {
	                };
	            } else
	                value = value.toFixed(remainder ? 1 : 0);
	            valueElm.innerHTML = value;
	            if (extraStep)
	                extraStep(t);
	        }
	        if (!valueElm.doin) {
	            doin = new Doin(step, speed || 0.33);
	            valueElm.doin = doin;
	        } else
	            doin = valueElm.doin;
	        doin.step = step;
	        doin.run();
	    }
	};
	var barPies = document.querySelectorAll('.barPie');
	setTimeout(lazyCount, 1000);
	function lazyCount() {
	    var currentBarPie, toValue, itemsCount;
	    function step(t) {
	        var itemIdx = (50 - Math.round(itemsCount * (toValue / 100) * t));
	        if(toValue == 0){
	        	return;
	        }
	        document.getElementById(currentBarPie.id + 'Item' + itemIdx).checked = true;
	    }
	    for (var i = barPies.length; i--;) {
	        currentBarPie = barPies[i];
	        toValue = currentBarPie.dataset.toValue;
	        if (toValue) {
	            itemsCount = currentBarPie.dataset.itemsCount;
	            barPie.update(currentBarPie, toValue, 1.5, step);
	        }
	    }
	}
	
	</script>
</body>
</html>