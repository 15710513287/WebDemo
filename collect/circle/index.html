<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>圆形进度条</title>
		<link rel="stylesheet" type="text/css" href="css/style.css">
	</head>
	<body>
		<div class="circle">
	        <div class="pie_left"><div class="left"></div></div>
	        <div class="pie_right"><div class="right"></div></div>
	        <div class="theValue"><span class="vauNum">81</span>%</div>
	    </div>
	    <div class="circle">
	        <div class="pie_left"><div class="left"></div></div>
	        <div class="pie_right"><div class="right"></div></div>
	        <div class="theValue"><span class="vauNum">20</span>%</div>
	    </div>
		<script src="js/jquery-2.1.1.min.js"></script>
		<script>
		$(function() {
		    $('.circle').each(function(index, el) {
		        var num = Number($(this).find('.vauNum').text());
		        if(!num){
		        	return;
		        }
		        if(num < 0){
		        	num = 0;
		        }
		        if(num > 100){
		        	num = 100;
		        }
		        num = num * 3.6;
	            var that=$(this).find('.right');
	            $(this).find('.right').animate({
	                aniStyle:num
	            },{
	                step:function(now,fx){
	                	if(now > 180){
	                		$(this).attr("style","-ms-transform : rotate(180deg);-webkit-transform : rotate(180deg);transform: rotate(180deg);");
	                		var deg = now - 180;
	                		/*$(this).parents(".pie_right").prev(".pie_left").find(".left").css({
	                			"transform": "rotate(" + deg + "deg)",
	                			"-ms-transform" : "rotate(" + deg + "deg)",
	                			"-webkit-transform" : "rotate(" + deg + "deg)"
	                		});*/
	                		$(this).parents(".pie_right").prev(".pie_left").find(".left").attr("style","-ms-transform : rotate(" + deg + "deg);-webkit-transform : rotate(" + deg + "deg);transform: rotate(" + deg + "deg);");
	                	}else{
	                		/*$(this).css({
	                			"transform": "rotate(" + now + "deg)",
	                			"-ms-transform" : "rotate(" + now + "deg)",
	                			"-webkit-transform" : "rotate(" + now + "deg)"
	                		});*/
	                		$(this).attr("style","-ms-transform : rotate(" + now + "deg);-webkit-transform : rotate(" + now + "deg);transform: rotate(" + now + "deg);");
	                	}
	            	},
	            	duration:1500
	        	})
		    });
		});
		</script>
	</body>
</html>
